{"ast":null,"code":"import _objectWithoutProperties from\"/home/chirag/Documents/concetto/concetto_front/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"/home/chirag/Documents/concetto/concetto_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/chirag/Documents/concetto/concetto_front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/chirag/Documents/concetto/concetto_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/chirag/Documents/concetto/concetto_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/chirag/Documents/concetto/concetto_front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Header from\"./Header\";import Footer from\"./Footer\";import Home from\"./Home\";import EventDetail from\"./EventDetail\";import{Switch,Route,Redirect,withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import{fetchEvents as _fetchEvents,getEvent as _getEvent}from\"../redux/Actions/Events\";import{loginUser as _loginUser,logoutUser as _logoutUser,registerUser as _registerUser}from\"../redux/Actions/Auth\";import{fetchUsers as _fetchUsers,editUser as _editUser,editPassword as _editPassword}from\"../redux/Actions/Users\";var mapStateToProps=function mapStateToProps(state){return{events:state.events,auth:state.auth,users:state.users};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchEvents:function fetchEvents(){dispatch(_fetchEvents());},getEvent:function getEvent(name){return dispatch(_getEvent(name));},fetchUsers:function fetchUsers(){dispatch(_fetchUsers());},loginUser:function loginUser(creds){return dispatch(_loginUser(creds));},logoutUser:function logoutUser(){return dispatch(_logoutUser());},registerUser:function registerUser(creds){return dispatch(_registerUser(creds));},editUser:function editUser(email,name,phone,college){return dispatch(_editUser(email,name,phone,college));},editPassword:function editPassword(email,password){return dispatch(_editPassword(email,password));}};};var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);function Main(props){var _this;_classCallCheck(this,Main);_this=_possibleConstructorReturn(this,_getPrototypeOf(Main).call(this,props));_this.componentWillUnmount=function(){window.removeEventListener(\"scroll\",_this.handleScroll);};_this.handleScroll=function(event){var scrollTop=window.pageYOffset;if(scrollTop>window.innerHeight/4){if(!_this.state.showLogo){_this.setState({showLogo:true});}}else{if(_this.state.showLogo)_this.setState({showLogo:false});console.log(scrollTop+\" \"+window.innerHeight);}};_this.state={showLogo:false,preloader:true,delayed:false};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.fetchEvents();if(this.props.auth.isAuthenticated&&this.props.auth.userinfo&&this.props.auth.userinfo.admin){this.props.fetchUsers();}window.addEventListener(\"scroll\",this.handleScroll);this.setState({preloader:false});setTimeout(function(){_this2.setState({delayed:true});},4000);}},{key:\"render\",value:function render(){var _this3=this;var preloader=this.props.preloader;var delayed=this.state.delayed;// if (preloader && !delayed) {\n//   return <div>Loading .........</div>;\n// }\nvar PrivateRouteCommon=function PrivateRouteCommon(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,[\"component\"]);return React.createElement(Route,Object.assign({},rest,{render:function render(props){return _this3.props.auth.isAuthenticated?React.createElement(Component,props):React.createElement(Redirect,{to:{pathname:\"/home\",state:{from:props.location}}});}}));};var PrivateRouteAdmin=function PrivateRouteAdmin(_ref2){var Component=_ref2.component,rest=_objectWithoutProperties(_ref2,[\"component\"]);return React.createElement(Route,Object.assign({},rest,{render:function render(props){return _this3.props.auth.isAuthenticated&&_this3.props.auth.userinfo.admin?React.createElement(Component,props):React.createElement(Redirect,{to:{pathname:\"/home\",state:{from:props.location}}});}}));};var PrivateRouteStudent=function PrivateRouteStudent(_ref3){var Component=_ref3.component,rest=_objectWithoutProperties(_ref3,[\"component\"]);return React.createElement(Route,Object.assign({},rest,{render:function render(props){return _this3.props.auth.isAuthenticated&&!_this3.props.auth.userinfo.admin?React.createElement(Component,props):React.createElement(Redirect,{to:{pathname:\"/home\",state:{from:props.location}}});}}));};return React.createElement(\"div\",{className:\"App\"},React.createElement(Header,{showLogo:this.state.showLogo,auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser,registerUser:this.props.registerUser}),React.createElement(Switch,{location:this.props.location},React.createElement(Route,{exact:true,path:\"/home\",component:function component(){return React.createElement(Home,{showLogo:_this3.state.showLogo});}}),React.createElement(Route,{exact:true,path:\"/events\",component:function component(){return React.createElement(EventDetail,{events:_this3.props.events,auth:_this3.props.auth});}}),React.createElement(Redirect,{to:\"/home\"})),React.createElement(Footer,null));}}]);return Main;}(Component);export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Main));","map":{"version":3,"sources":["/home/chirag/Documents/concetto/concetto_front/src/components/MainComponent.js"],"names":["React","Component","Header","Footer","Home","EventDetail","Switch","Route","Redirect","withRouter","connect","fetchEvents","getEvent","loginUser","logoutUser","registerUser","fetchUsers","editUser","editPassword","mapStateToProps","state","events","auth","users","mapDispatchToProps","dispatch","name","creds","email","phone","college","password","Main","props","componentWillUnmount","window","removeEventListener","handleScroll","event","scrollTop","pageYOffset","innerHeight","showLogo","setState","console","log","preloader","delayed","isAuthenticated","userinfo","admin","addEventListener","setTimeout","PrivateRouteCommon","component","rest","pathname","from","location","PrivateRouteAdmin","PrivateRouteStudent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Home from \"./Home\";\nimport EventDetail from \"./EventDetail\";\n\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { fetchEvents, getEvent } from \"../redux/Actions/Events\";\nimport { loginUser, logoutUser, registerUser } from \"../redux/Actions/Auth\";\nimport { fetchUsers, editUser, editPassword } from \"../redux/Actions/Users\";\n\nconst mapStateToProps = state => {\n  return {\n    events: state.events,\n    auth: state.auth,\n    users: state.users\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  fetchEvents: () => {\n    dispatch(fetchEvents());\n  },\n  getEvent: name => dispatch(getEvent(name)),\n  fetchUsers: () => {\n    dispatch(fetchUsers());\n  },\n  loginUser: creds => dispatch(loginUser(creds)),\n  logoutUser: () => dispatch(logoutUser()),\n  registerUser: creds => dispatch(registerUser(creds)),\n  editUser: (email, name, phone, college) =>\n    dispatch(editUser(email, name, phone, college)),\n  editPassword: (email, password) => dispatch(editPassword(email, password))\n});\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showLogo: false,\n      preloader: true,\n      delayed: false\n    };\n  }\n  componentDidMount() {\n    this.props.fetchEvents();\n    if (\n      this.props.auth.isAuthenticated &&\n      this.props.auth.userinfo &&\n      this.props.auth.userinfo.admin\n    ) {\n      this.props.fetchUsers();\n    }\n    window.addEventListener(\"scroll\", this.handleScroll);\n    this.setState({ preloader: false });\n    setTimeout(() => {\n      this.setState({ delayed: true });\n    }, 4000);\n  }\n\n  componentWillUnmount = () => {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  };\n\n  handleScroll = event => {\n    let scrollTop = window.pageYOffset;\n    if (scrollTop > window.innerHeight / 4) {\n      if (!this.state.showLogo) {\n        this.setState({\n          showLogo: true\n        });\n      }\n    } else {\n      if (this.state.showLogo)\n        this.setState({\n          showLogo: false\n        });\n      console.log(scrollTop + \" \" + window.innerHeight);\n    }\n  };\n\n  render() {\n    const { preloader } = this.props;\n    const { delayed } = this.state;\n    // if (preloader && !delayed) {\n    //   return <div>Loading .........</div>;\n    // }\n    const PrivateRouteCommon = ({ component: Component, ...rest }) => (\n      <Route\n        {...rest}\n        render={props =>\n          this.props.auth.isAuthenticated ? (\n            <Component {...props} />\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/home\",\n                state: { from: props.location }\n              }}\n            />\n          )\n        }\n      />\n    );\n\n    const PrivateRouteAdmin = ({ component: Component, ...rest }) => (\n      <Route\n        {...rest}\n        render={props =>\n          this.props.auth.isAuthenticated && this.props.auth.userinfo.admin ? (\n            <Component {...props} />\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/home\",\n                state: { from: props.location }\n              }}\n            />\n          )\n        }\n      />\n    );\n\n    const PrivateRouteStudent = ({ component: Component, ...rest }) => (\n      <Route\n        {...rest}\n        render={props =>\n          this.props.auth.isAuthenticated && !this.props.auth.userinfo.admin ? (\n            <Component {...props} />\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/home\",\n                state: { from: props.location }\n              }}\n            />\n          )\n        }\n      />\n    );\n\n    return (\n      <div className=\"App\">\n        <Header\n          showLogo={this.state.showLogo}\n          auth={this.props.auth}\n          loginUser={this.props.loginUser}\n          logoutUser={this.props.logoutUser}\n          registerUser={this.props.registerUser}\n        />\n        <Switch location={this.props.location}>\n          <Route\n            exact\n            path=\"/home\"\n            component={() => <Home showLogo={this.state.showLogo} />}\n          />\n          <Route\n            exact\n            path=\"/events\"\n            component={() => (\n              <EventDetail events={this.props.events} auth={this.props.auth} />\n            )}\n          />\n          <Redirect to=\"/home\" />\n        </Switch>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Main)\n);\n"]},"metadata":{},"sourceType":"module"}