{"ast":null,"code":"import{USERS_FAILED,USERS_LOADING,ADD_USERS,EDIT_USER,EDIT_PASSWORD}from\"../ActionTypes\";import{baseUrl}from\"../../baseUrl\";export var fetchUsers=function fetchUsers(){return function(dispatch){var token=localStorage.getItem(\"token\");dispatch(usersLoading(true));return fetch(baseUrl+\"users\",{headers:{access_token:token}}).then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \"+response.status+\": \"+response.statusText);error.response=response;throw error;}},function(error){var errmess=new Error(error.message);throw errmess;}).then(function(response){return response.json();}).then(function(response){if(response.success){return dispatch(addUsers(response.results));}else{var error=new Error(response.error);throw error;}}).then(function(users){return dispatch(addUsers(users));}).catch(function(error){return dispatch(usersFailed(error.message));});};};export var editPassword=function editPassword(email,password){return function(dispatch){var token=localStorage.getItem(\"token\");return fetch(baseUrl+\"users/password/\"+email,{method:\"PUT\",//  ,     credentials: 'same-origin'\nbody:JSON.stringify({password:password}),headers:{\"Content-Type\":\"application/json\",access_token:token}}).then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \"+response.status+\": \"+response.statusText+\"\\n \");error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){if(response.success){var newCreds={email:email,password:password};localStorage.removeItem(\"creds\");localStorage.setItem(\"creds\",JSON.stringify(newCreds));alert(\"Password changed successfully\");return dispatch(editPasswordDispatch(newCreds));}else{var error=new Error(response.error);throw error;}}).catch(function(error){alert(\"Your password could not be changed\\nError: \"+error.message);});};};export var editUser=function editUser(email,name,phone,college){return function(dispatch){var newUser={name:name,college:college,phone:phone,email:email};var token=localStorage.getItem(\"token\");return fetch(baseUrl+\"users/\"+email,{method:\"PUT\",//  ,     credentials: 'same-origin'\nbody:JSON.stringify(newUser),headers:{\"Content-Type\":\"application/json\",access_token:token}}).then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \"+response.status+\": \"+response.statusText);error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){if(response.success){localStorage.removeItem(\"userinfo\");localStorage.setItem(\"userinfo\",JSON.stringify(response.results));return dispatch(editUserdispatch(response.results));}else{var error=new Error(response.error);throw error;}}).catch(function(error){alert(\"Your profile could not be edited\\nError: \"+error.message);});};};export var addUsers=function addUsers(users){return{type:ADD_USERS,payload:users};};export var usersLoading=function usersLoading(){return{type:USERS_LOADING};};export var usersFailed=function usersFailed(errmess){return{type:USERS_FAILED,payload:errmess};};export var editUserdispatch=function editUserdispatch(USER){return{type:EDIT_USER,payload:USER};};export var editPasswordDispatch=function editPasswordDispatch(CREDS){return{type:EDIT_PASSWORD,payload:CREDS};};","map":{"version":3,"sources":["/home/chirag/Documents/concetto/concetto_front/src/redux/Actions/Users.js"],"names":["USERS_FAILED","USERS_LOADING","ADD_USERS","EDIT_USER","EDIT_PASSWORD","baseUrl","fetchUsers","dispatch","token","localStorage","getItem","usersLoading","fetch","headers","access_token","then","response","ok","error","Error","status","statusText","errmess","message","json","success","addUsers","results","users","catch","usersFailed","editPassword","email","password","method","body","JSON","stringify","newCreds","removeItem","setItem","alert","editPasswordDispatch","editUser","name","phone","college","newUser","editUserdispatch","type","payload","USER","CREDS"],"mappings":"AAAA,OACEA,YADF,CAEEC,aAFF,CAGEC,SAHF,CAIEC,SAJF,CAKEC,aALF,KAMO,gBANP,CAOA,OAASC,OAAT,KAAwB,eAAxB,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAAC,QAAQ,CAAI,CAC1C,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACAH,QAAQ,CAACI,YAAY,CAAC,IAAD,CAAb,CAAR,CACA,MAAOC,CAAAA,KAAK,CAACP,OAAO,CAAG,OAAX,CAAoB,CAC9BQ,OAAO,CAAE,CACPC,YAAY,CAAEN,KADP,CADqB,CAApB,CAAL,CAKJO,IALI,CAMH,SAAAC,QAAQ,CAAI,CACV,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CACV,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UADnC,CAAZ,CAGAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CAhBE,CAiBH,SAAAA,KAAK,CAAI,CACP,GAAII,CAAAA,OAAO,CAAG,GAAIH,CAAAA,KAAJ,CAAUD,KAAK,CAACK,OAAhB,CAAd,CACA,KAAMD,CAAAA,OAAN,CACD,CApBE,EAsBJP,IAtBI,CAsBC,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAtBT,EAuBJT,IAvBI,CAuBC,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACS,OAAb,CAAsB,CACpB,MAAOlB,CAAAA,QAAQ,CAACmB,QAAQ,CAACV,QAAQ,CAACW,OAAV,CAAT,CAAf,CACD,CAFD,IAEO,CACL,GAAIT,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAUH,QAAQ,CAACE,KAAnB,CAAZ,CACA,KAAMA,CAAAA,KAAN,CACD,CACF,CA9BI,EA+BJH,IA/BI,CA+BC,SAAAa,KAAK,QAAIrB,CAAAA,QAAQ,CAACmB,QAAQ,CAACE,KAAD,CAAT,CAAZ,EA/BN,EAgCJC,KAhCI,CAgCE,SAAAX,KAAK,QAAIX,CAAAA,QAAQ,CAACuB,WAAW,CAACZ,KAAK,CAACK,OAAP,CAAZ,CAAZ,EAhCP,CAAP,CAiCD,CApCyB,EAAnB,CAsCP,MAAO,IAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAQC,QAAR,QAAqB,UAAA1B,QAAQ,CAAI,CAC3D,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,MAAOE,CAAAA,KAAK,CAACP,OAAO,CAAG,iBAAV,CAA8B2B,KAA/B,CAAsC,CAChDE,MAAM,CAAE,KADwC,CAEhD;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEJ,QAAQ,CAAEA,QAAZ,CAAf,CAH0C,CAIhDpB,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,YAAY,CAAEN,KAFP,CAJuC,CAAtC,CAAL,CASJO,IATI,CAUH,SAAAC,QAAQ,CAAI,CACV,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CACV,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UAA7C,CAA0D,KADhD,CAAZ,CAGAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CApBE,CAqBH,SAAAA,KAAK,CAAI,CACP,KAAMA,CAAAA,KAAN,CACD,CAvBE,EAyBJH,IAzBI,CAyBC,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAzBT,EA0BJT,IA1BI,CA0BC,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACS,OAAb,CAAsB,CACpB,GAAIa,CAAAA,QAAQ,CAAG,CAAEN,KAAK,CAAEA,KAAT,CAAgBC,QAAQ,CAAEA,QAA1B,CAAf,CACAxB,YAAY,CAAC8B,UAAb,CAAwB,OAAxB,EACA9B,YAAY,CAAC+B,OAAb,CAAqB,OAArB,CAA8BJ,IAAI,CAACC,SAAL,CAAeC,QAAf,CAA9B,EACAG,KAAK,CAAC,+BAAD,CAAL,CACA,MAAOlC,CAAAA,QAAQ,CAACmC,oBAAoB,CAACJ,QAAD,CAArB,CAAf,CACD,CAND,IAMO,CACL,GAAIpB,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAUH,QAAQ,CAACE,KAAnB,CAAZ,CACA,KAAMA,CAAAA,KAAN,CACD,CACF,CArCI,EAsCJW,KAtCI,CAsCE,SAAAX,KAAK,CAAI,CACduB,KAAK,CAAC,8CAAgDvB,KAAK,CAACK,OAAvD,CAAL,CACD,CAxCI,CAAP,CAyCD,CA3C2B,EAArB,CA6CP,MAAO,IAAMoB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACX,KAAD,CAAQY,IAAR,CAAcC,KAAd,CAAqBC,OAArB,QAAiC,UAAAvC,QAAQ,CAAI,CACnE,GAAMwC,CAAAA,OAAO,CAAG,CACdH,IAAI,CAAEA,IADQ,CAEdE,OAAO,CAAEA,OAFK,CAGdD,KAAK,CAAEA,KAHO,CAIdb,KAAK,CAAEA,KAJO,CAAhB,CAMA,GAAMxB,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,MAAOE,CAAAA,KAAK,CAACP,OAAO,CAAG,QAAV,CAAqB2B,KAAtB,CAA6B,CACvCE,MAAM,CAAE,KAD+B,CAEvC;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeU,OAAf,CAHiC,CAIvClC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,YAAY,CAAEN,KAFP,CAJ8B,CAA7B,CAAL,CASJO,IATI,CAUH,SAAAC,QAAQ,CAAI,CACV,GAAIA,QAAQ,CAACC,EAAb,CAAiB,CACf,MAAOD,CAAAA,QAAP,CACD,CAFD,IAEO,CACL,GAAIE,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CACV,SAAWH,QAAQ,CAACI,MAApB,CAA6B,IAA7B,CAAoCJ,QAAQ,CAACK,UADnC,CAAZ,CAGAH,KAAK,CAACF,QAAN,CAAiBA,QAAjB,CACA,KAAME,CAAAA,KAAN,CACD,CACF,CApBE,CAqBH,SAAAA,KAAK,CAAI,CACP,KAAMA,CAAAA,KAAN,CACD,CAvBE,EAyBJH,IAzBI,CAyBC,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACQ,IAAT,EAAJ,EAzBT,EA0BJT,IA1BI,CA0BC,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACS,OAAb,CAAsB,CACpBhB,YAAY,CAAC8B,UAAb,CAAwB,UAAxB,EACA9B,YAAY,CAAC+B,OAAb,CAAqB,UAArB,CAAiCJ,IAAI,CAACC,SAAL,CAAerB,QAAQ,CAACW,OAAxB,CAAjC,EACA,MAAOpB,CAAAA,QAAQ,CAACyC,gBAAgB,CAAChC,QAAQ,CAACW,OAAV,CAAjB,CAAf,CACD,CAJD,IAIO,CACL,GAAIT,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAUH,QAAQ,CAACE,KAAnB,CAAZ,CACA,KAAMA,CAAAA,KAAN,CACD,CACF,CAnCI,EAoCJW,KApCI,CAoCE,SAAAX,KAAK,CAAI,CACduB,KAAK,CAAC,4CAA8CvB,KAAK,CAACK,OAArD,CAAL,CACD,CAtCI,CAAP,CAuCD,CA/CuB,EAAjB,CAiDP,MAAO,IAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAE,KAAK,QAAK,CAChCqB,IAAI,CAAE/C,SAD0B,CAEhCgD,OAAO,CAAEtB,KAFuB,CAAL,EAAtB,CAKP,MAAO,IAAMjB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SAAO,CACjCsC,IAAI,CAAEhD,aAD2B,CAAP,EAArB,CAIP,MAAO,IAAM6B,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAR,OAAO,QAAK,CACrC2B,IAAI,CAAEjD,YAD+B,CAErCkD,OAAO,CAAE5B,OAF4B,CAAL,EAA3B,CAKP,MAAO,IAAM0B,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAG,IAAI,QAAK,CACvCF,IAAI,CAAE9C,SADiC,CAEvC+C,OAAO,CAAEC,IAF8B,CAAL,EAA7B,CAKP,MAAO,IAAMT,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAAU,KAAK,QAAK,CAC5CH,IAAI,CAAE7C,aADsC,CAE5C8C,OAAO,CAAEE,KAFmC,CAAL,EAAlC","sourcesContent":["import {\n  USERS_FAILED,\n  USERS_LOADING,\n  ADD_USERS,\n  EDIT_USER,\n  EDIT_PASSWORD\n} from \"../ActionTypes\";\nimport { baseUrl } from \"../../baseUrl\";\n\nexport const fetchUsers = () => dispatch => {\n  const token = localStorage.getItem(\"token\");\n  dispatch(usersLoading(true));\n  return fetch(baseUrl + \"users\", {\n    headers: {\n      access_token: token\n    }\n  })\n    .then(\n      response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error(\n            \"Error \" + response.status + \": \" + response.statusText\n          );\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n        var errmess = new Error(error.message);\n        throw errmess;\n      }\n    )\n    .then(response => response.json())\n    .then(response => {\n      if (response.success) {\n        return dispatch(addUsers(response.results));\n      } else {\n        var error = new Error(response.error);\n        throw error;\n      }\n    })\n    .then(users => dispatch(addUsers(users)))\n    .catch(error => dispatch(usersFailed(error.message)));\n};\n\nexport const editPassword = (email, password) => dispatch => {\n  const token = localStorage.getItem(\"token\");\n  return fetch(baseUrl + \"users/password/\" + email, {\n    method: \"PUT\",\n    //  ,     credentials: 'same-origin'\n    body: JSON.stringify({ password: password }),\n    headers: {\n      \"Content-Type\": \"application/json\",\n      access_token: token\n    }\n  })\n    .then(\n      response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error(\n            \"Error \" + response.status + \": \" + response.statusText + \"\\n \"\n          );\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n        throw error;\n      }\n    )\n    .then(response => response.json())\n    .then(response => {\n      if (response.success) {\n        let newCreds = { email: email, password: password };\n        localStorage.removeItem(\"creds\");\n        localStorage.setItem(\"creds\", JSON.stringify(newCreds));\n        alert(\"Password changed successfully\");\n        return dispatch(editPasswordDispatch(newCreds));\n      } else {\n        var error = new Error(response.error);\n        throw error;\n      }\n    })\n    .catch(error => {\n      alert(\"Your password could not be changed\\nError: \" + error.message);\n    });\n};\n\nexport const editUser = (email, name, phone, college) => dispatch => {\n  const newUser = {\n    name: name,\n    college: college,\n    phone: phone,\n    email: email\n  };\n  const token = localStorage.getItem(\"token\");\n  return fetch(baseUrl + \"users/\" + email, {\n    method: \"PUT\",\n    //  ,     credentials: 'same-origin'\n    body: JSON.stringify(newUser),\n    headers: {\n      \"Content-Type\": \"application/json\",\n      access_token: token\n    }\n  })\n    .then(\n      response => {\n        if (response.ok) {\n          return response;\n        } else {\n          var error = new Error(\n            \"Error \" + response.status + \": \" + response.statusText\n          );\n          error.response = response;\n          throw error;\n        }\n      },\n      error => {\n        throw error;\n      }\n    )\n    .then(response => response.json())\n    .then(response => {\n      if (response.success) {\n        localStorage.removeItem(\"userinfo\");\n        localStorage.setItem(\"userinfo\", JSON.stringify(response.results));\n        return dispatch(editUserdispatch(response.results));\n      } else {\n        var error = new Error(response.error);\n        throw error;\n      }\n    })\n    .catch(error => {\n      alert(\"Your profile could not be edited\\nError: \" + error.message);\n    });\n};\n\nexport const addUsers = users => ({\n  type: ADD_USERS,\n  payload: users\n});\n\nexport const usersLoading = () => ({\n  type: USERS_LOADING\n});\n\nexport const usersFailed = errmess => ({\n  type: USERS_FAILED,\n  payload: errmess\n});\n\nexport const editUserdispatch = USER => ({\n  type: EDIT_USER,\n  payload: USER\n});\n\nexport const editPasswordDispatch = CREDS => ({\n  type: EDIT_PASSWORD,\n  payload: CREDS\n});\n"]},"metadata":{},"sourceType":"module"}